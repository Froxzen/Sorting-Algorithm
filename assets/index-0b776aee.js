(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const e of s)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const e={};return s.integrity&&(e.integrity=s.integrity),s.referrerPolicy&&(e.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?e.credentials="include":s.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(s){if(s.ep)return;s.ep=!0;const e=o(s);fetch(s.href,e)}})();const a={INITIAL_ELEMENTS:50,INITIAL_SPEED:100,MIN_ELEMENTS:10,MAX_ELEMENTS:100,MIN_SPEED:10,MAX_SPEED:200,MOBILE_BREAKPOINT:768,HEIGHT_SCALE_DESKTOP:.8,HEIGHT_SCALE_MOBILE:.48},i={PRIMARY:"#3498db",SUCCESS:"#34ba34",DISABLED:"#808080",ACTIVE:"#1E90FF",BAR:"black"};function c(n){return new Promise(t=>setTimeout(t,n))}function p(){return Math.floor(Math.random()*100)+1}function g(n){return window.innerWidth/n}function d(n,t){const o=t?a.HEIGHT_SCALE_MOBILE:a.HEIGHT_SCALE_DESKTOP;return n/100*(window.innerHeight*o)}class S{constructor(t){this.controls=t,this.state={windowWidth:window.innerWidth,windowHeight:window.innerHeight,numberOfElements:a.INITIAL_ELEMENTS,speed:a.INITIAL_SPEED,timeouts:[]},this.initialize()}initialize(){this.createDataset(),this.setupEventListeners(),this.updateDataHeight()}createDataset(){this.controls.container.innerHTML="";for(let t=0;t<this.state.numberOfElements;t++){const o=document.createElement("div"),r=p(),s=g(this.state.numberOfElements),e=d(r,this.isMobile());o.className="data",o.setAttribute("value",r.toString()),o.style.width=`${s}px`,o.style.height=`${e}px`,this.controls.container.appendChild(o)}}isMobile(){return window.innerWidth<=a.MOBILE_BREAKPOINT}updateDataHeight(){document.querySelectorAll(".data").forEach(o=>{const r=parseInt(o.getAttribute("value")),s=d(r,this.isMobile());o.style.height=`${s}px`})}setupEventListeners(){window.addEventListener("resize",()=>this.updateDataHeight()),this.controls.generate.addEventListener("click",()=>{this.createDataset(),this.updateDataHeight()}),this.controls.sizeSlider.addEventListener("input",()=>{this.state.numberOfElements=parseInt(this.controls.sizeSlider.value),this.createDataset(),this.updateDataHeight()}),this.controls.speedSlider.addEventListener("input",()=>{const t=parseInt(this.controls.speedSlider.max),o=parseInt(this.controls.speedSlider.min),r=parseInt(this.controls.speedSlider.value);this.state.speed=t+o-r}),this.setupSortingControls()}setupSortingControls(){this.controls.sort.addEventListener("click",async()=>{await this.bubbleSort()})}disableControls(){this.controls.generate.disabled=!0,this.controls.sizeSlider.disabled=!0,this.controls.speedSlider.disabled=!0,this.controls.sort.disabled=!0,this.controls.generate.style.backgroundColor=i.DISABLED,this.controls.sizeBtn.style.backgroundColor=i.DISABLED,this.controls.speedBtn.style.backgroundColor=i.DISABLED,this.controls.sort.style.backgroundColor=i.DISABLED,this.controls.stopBtn.style.backgroundColor="rgb(236, 16, 16)"}resetControls(){this.controls.generate.disabled=!1,this.controls.sizeSlider.disabled=!1,this.controls.speedSlider.disabled=!1,this.controls.sort.disabled=!1,this.controls.generate.style.backgroundColor=i.PRIMARY,this.controls.sizeBtn.style.backgroundColor=i.PRIMARY,this.controls.speedBtn.style.backgroundColor=i.PRIMARY,this.controls.sort.style.backgroundColor=i.SUCCESS,this.controls.stopBtn.style.backgroundColor=i.DISABLED}async bubbleSort(){this.disableControls();const t=document.querySelectorAll(".data");let o=!1;this.controls.stopBtn.addEventListener("click",()=>{o=!0,this.state.timeouts.forEach(r=>clearTimeout(r)),this.state.timeouts=[],this.resetControls()});for(let r=0;r<t.length-1&&!o;r++){let s=!1;for(let e=0;e<t.length-1-r&&!o;e++){const l=parseInt(t[e].getAttribute("value")),u=parseInt(t[e+1].getAttribute("value"));if(t[e].style.backgroundColor=i.ACTIVE,t[e+1].style.backgroundColor=i.ACTIVE,l>u){const h=t[e].style.height,E=t[e].getAttribute("value");t[e].style.height=t[e+1].style.height,t[e].setAttribute("value",t[e+1].getAttribute("value")),t[e+1].style.height=h,t[e+1].setAttribute("value",E),s=!0}await c(this.state.speed),t[e].style.backgroundColor=i.BAR,t[e+1].style.backgroundColor=i.BAR,await c(this.state.speed/2)}if(!s||o){this.resetControls();break}}}}document.addEventListener("DOMContentLoaded",()=>{const n={generate:document.querySelector("#generate"),sizeBtn:document.querySelector("#size"),speedBtn:document.querySelector("#speed"),stopBtn:document.querySelector("#stop"),sizeSlider:document.querySelector("#size-slider"),speedSlider:document.querySelector("#speed-slider"),sort:document.querySelector("#sort"),container:document.querySelector(".container")};new S(n)});
